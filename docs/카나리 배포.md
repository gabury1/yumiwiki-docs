---
title: 카나리 배포 (Canary Deployment)
aliases: ["canary", "카나리", "광산의카나리아"]
---

# 카나리 배포 (Canary Deployment)

> 위험을 먼저 감지하는 선발대 배포

**카나리 배포**는 아주 적은 양의 트래픽만 새로운 버전으로 먼저 보내서 안정성을 확인한 후, 이상이 없으면 점진적으로 전체 트래픽을 넘기는 전략이다. '광산의 카나리아'에서 유래했다.

## 작동 방식

1. **선발대 투입**: 1%~5% 정도의 극소수 사용자에게만 신버전(Canary)을 노출한다.
2. **모니터링**: 오류율, 응답 속도, 로그 등을 집중적으로 분석하여 문제가 없는지 확인한다.
3. **확장**: 문제가 없으면 신버전의 비중을 10%, 25%, 50%, 100%로 천천히 늘려간다.
4. **회수**: 만약 에러가 급증하면 즉시 해당 트래픽을 구버전으로 다시 돌린다.

## 장점

- **리스크 관리**: 문제가 발생해도 전체 사용자가 아닌 극히 일부에게만 영향을 준다.
- **실제 유저 테스트**: 스테이징 환경이 아닌 실제 운영 환경에서 유저의 반응과 성능을 확인할 수 있다 (A/B 테스트와 병행 가능).
- **정밀한 제어**: 트래픽 제어 도구를 통해 유연하게 배포 범위를 조절할 수 있다.

## 단점

- **관리 복잡도**: 트래픽을 나눠서 관리해야 하므로 라우팅 설정과 모니터링 시스템 구축이 복잡하다.
- **버전 공존**: 롤링 업데이트와 마찬가지로 서로 다른 버전이 동시에 운영되므로 데이터 및 API 호환성을 유지해야 한다.

## 활용 (Tooling)
- [[ArgoCD]] Rollouts
- [[Istio]] / Linkerd (Service Mesh)
- [[AWS]] App Mesh
- [[Kong]] Gateway
