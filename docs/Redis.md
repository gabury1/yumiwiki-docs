---
title: Redis
aliases: ["redis", "레디스", "cache", "캐시서버"]
---

# Redis

> 초고속 [[캐싱]]이나 세션 저장이 필요할 때

[[인메모리]] [[Key-Value 데이터베이스]]다. 2009년에 나왔고, "Remote Dictionary Server"의 약자. 모든 데이터를 메모리에 저장해서 엄청 빠르다. 읽기/쓰기 지연이 마이크로초 단위.

캐시로 가장 많이 쓴다. DB 쿼리 결과, API 응답, 세션 데이터를 Redis에 저장해두면 성능이 극적으로 좋아진다. 트위터, 깃허브, 스택오버플로우, 인스타그램 다 쓴다.

단순한 Key-Value 저장소가 아니다. String, List, Set, Sorted Set, Hash, Stream 등 다양한 데이터 구조를 지원한다. 이 덕분에 랭킹 시스템, 실시간 피드, 메시지 큐까지 구현할 수 있다.

## 성능

메모리 기반이라 밀리초가 아니라 마이크로초 단위다. 단순 GET/SET은 초당 10만 건 이상 처리 가능. 벤치마크에서는 초당 수십만 건도 나온다.

싱글 스레드로 동작한다 (Redis 6부터 I/O 멀티스레딩 옵션 있음). 그래도 빠른 이유는 메모리 연산이 워낙 빨라서. CPU가 병목이 되는 경우는 드물다.

파이프라이닝으로 여러 명령을 한 번에 보내면 네트워크 왕복 줄일 수 있다. Lua 스크립팅으로 서버에서 복잡한 로직 실행도 가능.

메모리가 핵심 자원이다. 데이터 양에 비례해서 메모리 필요. maxmemory 설정하고, 정책(LRU, LFU 등)으로 오래된 키 자동 삭제하게 해야 한다.

## 생태계

모든 언어에 클라이언트가 있다. [[Node.js]]는 [[ioredis]], [[Python]]은 [[redis-py]], [[Java]]는 [[Jedis]]나 [[Lettuce]]. [[Spring Data Redis]]도 있다.

[[Redis Cluster]]로 수평 확장 가능. 데이터를 여러 노드에 자동 분산. [[Redis Sentinel]]로 고가용성 구성 (자동 페일오버).

[[Redis Stack]]이 요즘 트렌드. JSON 문서 저장, 전문 검색([[RediSearch]]), 그래프([[RedisGraph]]), 시계열([[RedisTimeSeries]]) 기능 추가.

매니지드 서비스: [[ElastiCache]], [[Azure Cache]], [[Redis Cloud]], [[Upstash]] 등. 직접 운영하기 싫으면 이쪽으로.

## 주의점

**메모리 = 비용**: 모든 게 메모리에 있어야 해서 비싸다. 자주 접근하는 데이터만 넣고, 용량 관리 잘 해야 한다. 대용량 데이터는 [[SSD]] 기반 DB 쓰자.

**영속성 이해 필수**: 기본은 인메모리라 재시작하면 날아간다. RDB(스냅샷)나 AOF(로그) 설정으로 디스크에 저장해야 한다. 둘 다 켜는 게 안전. 하지만 캐시 용도면 영속성 없어도 됨.

**키 설계 중요**: 키 이름 규칙 정해야 나중에 관리된다. `user:123:session` 같은 네이밍 컨벤션 쓰자. KEYS 명령은 운영에서 금지 (풀스캔). SCAN 쓰자.

**TTL 설정**: 캐시 데이터는 TTL 꼭 설정. 안 하면 메모리 계속 쌓인다. `EXPIRE`, `SETEX` 활용.

**핫키 문제**: 특정 키에 접근이 몰리면 그 키가 있는 노드만 바빠진다 (클러스터 환경). 캐시 읽기 레이어 앞에 로컬 캐시 추가하거나, 키 분산 전략 고려.

**큰 값 주의**: 한 키에 너무 큰 값 넣으면 문제. 수 MB 이상이면 분리하자. `DEL` 할 때도 블로킹 발생할 수 있어서 `UNLINK`(비동기 삭제) 쓰자.

**Pub/Sub 한계**: 메시지 손실 가능. 구독자가 없으면 메시지 사라짐. 신뢰성 필요하면 [[Redis Streams]]나 [[Kafka]] 쓰자.

## 주요 기능

- 다양한 데이터 구조 (String, List, Set, Sorted Set, Hash, Stream)
- Pub/Sub 메시징
- 트랜잭션 (MULTI/EXEC)
- Lua 스크립팅
- 클러스터링 / 샤딩
- Sentinel (고가용성)
- TTL (자동 만료)
- 지리공간 인덱스 (GEOADD, GEORADIUS)

## 기타

Redis 창시자 Salvatore Sanfilippo(antirez)는 이탈리아 개발자다. 2009년 실시간 웹 애플리케이션을 만들다가 기존 DB가 답답해서 직접 만들었다. 2020년까지 혼자서 대부분의 코드를 작성했다. 지금은 은퇴하고 Redis Labs(현 Redis Inc.)가 관리한다.

Redis는 C 언어로 작성됐고, 코드가 매우 깔끔하기로 유명하다. 총 코드가 5만 줄 정도밖에 안 되는데 엄청나게 많은 기능을 제공한다. "읽기 좋은 코드의 교과서"라는 평가를 받는다.

"Redis는 데이터 구조 서버"라고 부른다. 단순 Key-Value가 아니라 List, Set, Sorted Set 같은 자료구조를 직접 제공하니까. 이게 Redis의 핵심 차별점이다. [[Memcached]]는 String만 되는데 Redis는 훨씬 다양하다.

트위터 타임라인이 Redis Sorted Set으로 구현됐다는 건 유명한 사례다. 점수(타임스탬프)로 정렬된 트윗 ID를 저장해서 빠르게 조회한다. Stack Overflow 역시 Redis를 헤비하게 쓴다. 이 정도 규모에서 쓴다는 게 Redis 성능의 증거.
