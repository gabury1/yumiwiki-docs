---
aliases: [네스트, NestJS, nest.js, Nest]
---

# NestJS

> [[TypeScript]]로 구조화된 엔터프라이즈급 백엔드 만들고 싶을 때

[[Node.js]] 기반 [[웹 프레임워크]]다. [[Angular]]에서 영감을 받아서 모듈, 컨트롤러, 서비스 구조가 비슷하다. [[TypeScript]]가 기본이고, [[Express]]나 [[Fastify]] 위에서 돌아간다.

[[Express]]가 너무 자유로워서 프로젝트가 스파게티가 됐다면 NestJS를 고려해볼 만하다. 폴더 구조, 아키텍처 패턴, 의존성 주입까지 프레임워크가 정해준다. [[Spring Boot]]의 [[Node.js]] 버전이라고 보면 된다.

[[TypeScript]] 필수다. 데코레이터 문법을 많이 쓴다. `@Controller`, `@Get`, `@Injectable` 같은 어노테이션으로 코드를 작성한다. [[Angular]] 해본 사람은 익숙할 거다. 처음 보면 좀 낯설 수 있다.

대규모 프로젝트, 팀 단위 개발, 장기 유지보수가 필요한 서비스에 적합하다. 스타트업 MVP에는 오버스펙일 수 있다.

## 성능

기본으로 [[Express]] 위에서 돌아간다. 성능이 중요하면 [[Fastify]] 어댑터로 바꿀 수 있다. Fastify 쓰면 2~3배 빨라진다.

[[Node.js]] 기반이라 I/O 바운드 작업에 효율적이다. CPU 집약 작업은 여전히 약점. 워커 스레드나 별도 서비스로 분리해야 한다.

메모리 사용량은 [[Express]]보다 좀 많다. 프레임워크 오버헤드가 있으니까. 그래도 [[Spring Boot]]보다는 가볍다.

## 생태계

공식 모듈이 잘 갖춰져 있다. [[TypeORM]], [[Prisma]], [[Mongoose]] 연동 모듈. [[GraphQL]], [[WebSocket]], [[마이크로서비스]] 통신(gRPC, Kafka, RabbitMQ) 다 공식 지원.

[[Swagger]] 문서 자동 생성, [[Jest]] 테스트 통합, [[ConfigModule]]로 환경변수 관리. 웬만한 건 공식 문서에 가이드가 있다.

CLI 도구가 강력하다. `nest g resource users` 하면 컨트롤러, 서비스, 모듈, DTO, 테스트 파일까지 한 번에 생성된다. 보일러플레이트 코드 직접 안 짜도 된다.

한국어 자료는 [[Express]]보다 적지만 점점 늘고 있다. 공식 문서가 잘 되어 있어서 영어 읽으면 문제없다.

## 주의점

**러닝커브 높음**: 모듈 시스템, 의존성 주입, 데코레이터, [[TypeScript]] 고급 기능을 다 알아야 한다. [[Angular]] 경험 없으면 초반에 헤맬 수 있다. 공식 문서 처음부터 정독하는 거 추천.

**순환 참조**: 모듈 간에 서로 import하면 에러난다. `forwardRef()` 로 해결할 수 있지만 설계를 다시 생각해보는 게 좋다. 공통 모듈 분리하거나 이벤트 기반으로 바꾸자.

**데코레이터 과다**: 코드가 데코레이터 떡칠이 된다. 메타데이터 기반이라 디버깅할 때 흐름 파악이 어려울 수 있다. 에러 메시지가 불친절한 경우도 있다.

**빌드 시간**: [[TypeScript]] 컴파일 + 데코레이터 트랜스파일이라 빌드가 좀 걸린다. 개발 중에는 `nest start --watch`로 핫 리로드 쓰면 된다.

**Express 미들웨어 호환**: 대부분 호환되지만 안 되는 것도 있다. NestJS 방식으로 감싸야 하는 경우가 있다.

**테스트 모킹 복잡**: 의존성 주입 구조라 테스트할 때 모든 의존성을 모킹해야 한다. `@nestjs/testing` 모듈 잘 익혀야 한다.

## 주요 기능

- 모듈 기반 아키텍처
- 의존성 주입 (Dependency Injection)
- 데코레이터 기반 라우팅
- 가드, 인터셉터, 파이프, 필터로 요청 파이프라인 제어
- [[GraphQL]], [[WebSocket]], [[마이크로서비스]] 공식 지원
- CLI로 코드 자동 생성
- [[Swagger]] 문서 자동 생성

## 기타

창시자 Kamil Myśliwiec는 폴란드 개발자다. 2017년에 만들었는데, [[Angular]] 백엔드 버전을 만들고 싶었다고 한다. [[Node.js]]에 구조가 없어서 답답했다는 게 시작이었다.

개발자들 사이에서 "Node.js의 [[Spring Boot]]"라고 부른다. [[Express]] 쓰다가 넘어오면 처음엔 복잡해 보이지만, 프로젝트가 커지면 구조화의 필요성을 느끼게 된다.

데코레이터가 많아서 코드가 크리스마스 트리 같다는 평이 있다. `@Controller`, `@Get`, `@UseGuards`, `@UsePipes`, `@UseInterceptors`... 한 함수에 다섯 개씩 붙는 경우도 있다.

CLI 명령어 `nest g resource users`를 치면 컨트롤러, 서비스, 모듈, DTO, 테스트 파일까지 한 번에 생성된다. 보일러플레이트 코드를 직접 안 짜도 되는 건 편하다.
