---
aliases: [패스트API, fastapi]
---

# FastAPI

> [[Python]]으로 고성능 비동기 API 서버 만들고 싶을 때

[[Python]] 기반 [[웹 프레임워크]]다. 2018년에 나온 비교적 신생 프레임워크인데, 빠르게 성장해서 [[Django]], [[Flask]] 다음으로 인기 있다. 타입 힌트 기반 자동 문서화와 비동기 처리가 핵심 특징.

[[Django]]는 배터리 포함이고 [[Flask]]는 마이크로 프레임워크인데, FastAPI는 그 중간쯤이다. API 개발에 필요한 건 다 있으면서도 군더더기가 없다. [[REST]] API, [[마이크로서비스]] 백엔드 만들 때 딱이다.

타입 힌트를 적극 활용한다. 함수 파라미터에 타입 선언하면 자동으로 요청 검증, 직렬화, API 문서 생성까지 된다. [[Pydantic]]이 이 마법을 담당한다. 개발 생산성이 확실히 좋다.

## 성능

[[Python]] 웹 프레임워크 중 가장 빠른 축에 속한다. [[Starlette]] 위에서 돌아가고, [[ASGI]] 기반이라 비동기 처리가 네이티브다. 벤치마크상 [[Flask]]보다 10배 이상 빠르고, [[Node.js]]나 [[Go]]에 근접하는 성능을 낸다.

[[Uvicorn]]이나 [[Hypercorn]] 같은 ASGI 서버로 띄운다. 워커 여러 개 돌리면 CPU 코어 다 활용 가능. [[Gunicorn]] + Uvicorn 워커 조합도 많이 쓴다.

async/await 문법으로 I/O 바운드 작업을 효율적으로 처리한다. DB 쿼리, HTTP 호출 같은 거 기다리는 동안 다른 요청 처리할 수 있다. 다만 비동기 코드 작성법을 알아야 제대로 활용된다.

동기 함수도 쓸 수 있다. FastAPI가 알아서 스레드풀에서 실행해준다. 하지만 성능 이점을 최대로 누리려면 비동기 라이브러리 조합이 필요하다 ([[asyncpg]], [[httpx]], [[aioredis]] 등).

## 생태계

[[Pydantic]]으로 데이터 검증과 직렬화. 타입 힌트만 잘 선언하면 자동으로 JSON 변환, 검증 에러 메시지까지 처리된다. Pydantic v2부터 [[Rust]] 기반이라 더 빨라졌다.

[[Swagger UI]]와 [[ReDoc]] 문서가 자동 생성된다. `/docs`, `/redoc` 엔드포인트로 바로 접속 가능. API 테스트도 브라우저에서 바로 할 수 있다. 프론트엔드 개발자한테 문서 따로 안 줘도 된다.

[[SQLAlchemy]]나 [[Tortoise-ORM]]으로 DB 연동. [[Alembic]]으로 마이그레이션. 인증은 [[OAuth2]], [[JWT]] 내장 지원된다. [[Depends]]로 의존성 주입도 가능.

커뮤니티가 빠르게 성장 중이다. 한국어 자료도 점점 늘고 있다. [[Django]]만큼 많지는 않지만 공식 문서가 워낙 잘 되어 있어서 큰 문제는 없다.

## 주의점

**비동기 함정**: `async def`로 선언했는데 안에서 동기 I/O 호출하면 [[이벤트 루프]] 블로킹된다. `requests` 대신 `httpx`, `psycopg2` 대신 `asyncpg` 써야 한다. 비동기 생태계가 동기보다 좁아서 원하는 라이브러리 없을 수 있다.

**ORM 선택**: [[SQLAlchemy]] 2.0 비동기 지원이 되긴 하는데 아직 어색하다. [[Tortoise-ORM]]은 비동기 네이티브인데 생태계가 작다. [[Prisma]]도 대안이지만 아직 베타 수준.

**학습 곡선**: 타입 힌트, [[Pydantic]], async/await, 의존성 주입 개념을 다 알아야 한다. [[Flask]]보다는 진입 장벽이 있다. 하지만 한 번 익숙해지면 생산성이 확 좋아진다.

**테스트 주의**: 비동기 코드 테스트하려면 `pytest-asyncio`나 `httpx.AsyncClient` 써야 한다. 동기 테스트 클라이언트 쓰면 이상하게 동작할 수 있다.

**프로덕션 배포**: [[Uvicorn]] 단독으로 배포하면 안 된다. [[Gunicorn]]을 매니저로 두고 Uvicorn 워커 여러 개 띄우거나, [[Docker]] + 오케스트레이션 쓰자. 프로세스 관리 직접 해야 한다.

**관리자 페이지 없음**: [[Django]] Admin 같은 게 없다. [[SQLAdmin]]이나 [[Starlette-Admin]] 같은 서드파티 써야 한다. 백오피스가 중요하면 [[Django]]가 나을 수도.

## 주요 기능

- 타입 힌트 기반 자동 요청 검증
- [[Swagger UI]] / [[ReDoc]] 자동 문서 생성
- [[OpenAPI]] 스키마 자동 생성
- 비동기 처리 (async/await)
- 의존성 주입 시스템
- [[OAuth2]], [[JWT]] 인증 내장
- [[WebSocket]] 지원

## 기타

창시자 Sebastián Ramírez는 콜롬비아 개발자다. 2018년에 만들었는데, 당시 [[Flask]]는 너무 단순하고 [[Django]]는 너무 무겁다고 느꼈다고 한다. 타입 힌트가 Python 3.6+에 정식으로 들어오면서 "이걸로 뭔가 할 수 있겠다" 싶었던 게 계기.

GitHub Stars가 [[Django]]를 추월했다. 출시된 지 6년밖에 안 됐는데 이미 7만 개 이상. 성장 속도가 무섭다. "현대적인 Python 웹 프레임워크"의 대표격이 됐다.

공식 문서가 압도적으로 좋다. 튜토리얼부터 고급 기능까지 친절하게 설명되어 있고, 예제 코드가 풍부하다. 한국어 번역도 커뮤니티에서 자발적으로 진행 중이다. 문서 하나로 팬층을 만든 케이스.

[[Pydantic]]의 성장과 궤를 같이한다. FastAPI가 유명해지면서 Pydantic도 덩달아 인기를 얻었다. Pydantic v2가 [[Rust]]로 재작성되면서 성능이 17배 빨라진 건 FastAPI 생태계에도 큰 영향을 줬다.
