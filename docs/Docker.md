---
title: Docker
aliases: ["docker", "도커", "container", "컨테이너"]
---

# Docker

> 애플리케이션을 어디서든 똑같이 실행하고 싶을 때

[[컨테이너]] 플랫폼이다. 2013년에 나왔고, 배포와 개발 환경을 완전히 바꿔놓았다. "내 컴퓨터에서는 되는데..."를 해결한다.

애플리케이션과 실행 환경을 이미지로 패키징한다. 이 이미지는 어디서든 동일하게 실행된다. 개발, 테스트, 운영 환경 차이로 인한 버그가 사라진다.

[[가상 머신]]보다 가볍다. VM은 OS 전체를 띄우지만, 컨테이너는 호스트 OS 커널을 공유한다. 시작이 빠르고(초 단위), 리소스 효율이 좋다.

현대 개발의 필수 도구다. [[CI/CD]], [[마이크로서비스]], [[Kubernetes]] 다 Docker 기반이다.

## 성능

컨테이너 오버헤드가 거의 없다. 네이티브와 성능 차이 1~5% 정도. [[가상 머신]]의 10~20% 오버헤드보다 훨씬 적다.

시작 시간이 빠르다. 이미지가 로컬에 있으면 1~2초면 뜬다. VM처럼 부팅 과정이 없다.

디스크 효율적. 레이어 구조라서 공통 부분은 한 번만 저장. 여러 컨테이너가 베이스 이미지 공유.

네트워크 오버헤드는 약간 있다. bridge 네트워크보다 host 네트워크가 빠르지만 격리가 약해짐. 대부분은 bridge로 충분.

## 생태계

[[Docker Hub]]가 공식 이미지 레지스트리. 공식 이미지(nginx, postgres, node 등) 바로 가져다 쓸 수 있다. [[GitHub Container Registry]], [[AWS ECR]], [[Google GCR]]도 있다.

[[Docker Compose]]로 멀티 컨테이너 환경 정의. `docker-compose.yml`에 서비스, 네트워크, 볼륨 선언하면 `docker compose up`으로 한 방에 뜬다.

[[Dockerfile]]로 이미지 빌드. FROM, RUN, COPY, CMD 명령어로 이미지 레시피 작성. 멀티스테이지 빌드로 최종 이미지 크기 줄일 수 있다.

[[Docker Desktop]]이 Mac/Windows용 GUI. 개발 환경에서 편리. [[Rancher Desktop]], [[Podman]]도 대안.

## 주의점

**이미지 크기 관리**: 무심코 만들면 수 GB 되기 쉽다. alpine 베이스 쓰고, 멀티스테이지 빌드하고, 불필요한 파일 제외하자. `.dockerignore` 필수.

**레이어 캐싱 활용**: Dockerfile 명령어 순서가 중요. 자주 바뀌는 건 아래에. `COPY package.json` → `RUN npm install` → `COPY . .` 순서로 해야 의존성 설치가 캐싱됨.

**루트로 실행하지 마라**: 기본이 root 유저. 보안상 위험. `USER` 명령으로 비루트 유저로 전환하자. 특히 운영 환경에서 중요.

**볼륨 관리**: 컨테이너 삭제하면 데이터도 날아감. DB 데이터, 로그 등 영속 데이터는 볼륨 마운트 필수. `docker volume` 또는 바인드 마운트.

**네트워크 이해**: 컨테이너 간 통신은 네트워크로. bridge가 기본. `docker network create`로 사용자 정의 네트워크 만들면 컨테이너 이름으로 접근 가능.

**리소스 제한**: 기본적으로 호스트 리소스 무제한 사용. `--memory`, `--cpus` 옵션으로 제한 걸어야 한 컨테이너가 전체 시스템 잡아먹는 거 방지.

**로그 관리**: 컨테이너 로그 무한정 쌓인다. `--log-opt max-size=10m --log-opt max-file=3` 설정. 또는 외부 로깅 드라이버.

**보안 스캔**: 이미지에 취약점 있을 수 있다. [[Trivy]], [[Snyk]]로 이미지 스캔. CI 파이프라인에 포함시키자.

## 주요 기능

- 이미지 빌드 (Dockerfile)
- 컨테이너 실행/관리
- 레이어 기반 파일 시스템
- 네트워킹 (bridge, host, overlay)
- 볼륨 (데이터 영속성)
- Docker Compose (멀티 컨테이너)
- 이미지 레지스트리 (push/pull)
- 빌드 캐싱

## 기타

Docker는 원래 dotCloud라는 PaaS 회사의 내부 프로젝트였다. 2013년 오픈소스로 공개했는데 반응이 폭발적이어서 회사 이름을 Docker Inc.로 바꿨다. PaaS 사업은 접고 Docker에 올인한 거다. 창업자 Solomon Hykes는 프랑스 개발자다.

"고래"가 Docker의 상징이다. 고래 등에 컨테이너 박스들이 실려 있는 로고. 실제 화물선의 컨테이너에서 아이디어를 가져왔다. 표준화된 박스에 뭐든 넣어서 배로 옮기는 것처럼, 표준화된 컨테이너에 앱을 넣어서 어디든 배포한다는 컨셉.

Docker가 컨테이너를 발명한 건 아니다. Linux 컨테이너(LXC)는 이미 있었다. Docker는 이걸 쉽게 만든 거다. Dockerfile로 이미지 빌드하고, 레지스트리로 공유하고, 어디서든 실행하는 워크플로우를 완성했다. "컨테이너의 대중화"가 Docker의 업적.

"Docker vs Kubernetes" 논쟁이 있었는데 이건 잘못된 프레임이다. Kubernetes는 컨테이너 오케스트레이션이고, Docker는 컨테이너 런타임이다. 실제로 Kubernetes가 Docker를 사용했었다. 지금은 containerd 같은 런타임도 선택 가능하지만, Docker는 여전히 개발 환경의 표준이다.
